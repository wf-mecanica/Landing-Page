<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acompanhamento de Serviço – WF Mecânica</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- ========================== HEADER ========================== -->
    <header class="site-header">
        <div class="container header-inner">

            <a href="index.html" class="brand">
                <img src="logo-wf.png" alt="Logo WF" class="logo">
            </a>

            <nav class="main-nav" id="nav">
                <ul>
                    <li><a href="index.html">Início</a></li>
                    <li><a href="index.html#sobre">Sobre Nós</a></li>
                    <li><a href="index.html#servicos">Serviços</a></li>
                    <li><a href="index.html#contato">Contato</a></li>
                </ul>
            </nav>

            <button class="menu-toggle" id="menu-toggle">☰</button>

        </div>
    </header>



    <!-- ========================== HERO ========================== -->
    <section class="hero" style="background-image: url('fundo-hero.jpg'); min-height:300px;">
        <div class="hero-overlay">
            <div class="container hero-content">
                <h1>Acompanhar Serviço</h1>
                <p class="lead">Consulte o andamento do serviço do seu veículo na oficina.</p>
            </div>
        </div>
    </section>



    <!-- ========================== CONSULTA ========================== -->
    <section class="container" style="padding-top: 20px;">
        <h2>Consultar Status</h2>
        <p>Digite a <strong>placa</strong> ou o <strong>código do serviço</strong> fornecido pela oficina.</p>

        <form id="consulta-form" class="contact-form" onsubmit="return consultarStatus(event)">
            <input type="text" id="codigo" placeholder="Placa (ex: ABC1234) ou Código do Serviço" required>
            <button class="btn btn-primary" type="submit">Consultar</button>
        </form>
    </section>



    <!-- ========================== RESULTADO ========================== -->
    <section class="container" id="resultado" style="display:none; padding-top:20px;">
        <h2>Status do Serviço</h2>

        <div class="service-status-box" style="background:#111; padding:20px; border-radius:10px;">
            <h3>Veículo: <span id="res-veiculo"></span></h3>
            <p><strong>Status atual:</strong> <span id="res-status"></span></p>

            <h3>Etapas:</h3>
            <ul id="res-etapas" style="margin-top:10px; line-height:1.8;"></ul>
        </div>
    </section>



    <!-- ========================== FOOTER ========================== -->
    <footer class="site-footer">
        <div class="container footer-inner">
            <div>© <span id="year"></span> WF Mecânica Automotiva</div>
        </div>
    </footer>

    <script src="scripts.js"></script>


    <!-- ========================== SCRIPT API REAL ========================== -->
    <script>
        // COLE AQUI O LINK DO SEU APP SCRIPT
        const API_URL = "COLE_AQUI_SEU_LINK_WEBAPP";

        async function consultarStatus(e) {
            e.preventDefault();

            const codigo = document.getElementById("codigo").value.trim().toUpperCase();
            const box = document.getElementById("resultado");

            if (!codigo) {
                alert("Digite a placa ou código do serviço.");
                return false;
            }

            try {
                const resposta = await fetch(${API_URL}?codigo=${codigo});
                const dados = await resposta.json();

                if (dados.erro) {
                    alert("Serviço não encontrado! Verifique a placa ou o código informado.");
                    return false;
                }

                // Preencher dados
                document.getElementById("res-veiculo").textContent = dados.veiculo;
                document.getElementById("res-status").textContent = dados.status;

                const etapasLista = document.getElementById("res-etapas");
                etapasLista.innerHTML = "";

                dados.etapas.split("\n").forEach(etapa => {
                    const li = document.createElement("li");
                    li.textContent = etapa;
                    etapasLista.appendChild(li);
                });

                box.style.display = "block";

            } catch (error) {
                alert("Erro ao conectar ao servidor. Verifique a API.");
                console.error(error);
            }

            return false;
        }
    </script>

</body>
</html>
